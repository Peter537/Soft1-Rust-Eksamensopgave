
## Question
Concurrency in Rust: Rust provides several tools to handle concurrency, such as 
threads, Arc, and Mutex. Discuss how you utilized these tools in your project. What challenges did you encounter while implementing concurrency, and how did Rustâ€™s safety guarantees affect your solutions?

## Code Snippet:

ui/loading_screen.rs for threads
```rust
impl<W: Widget<AppState>> Controller<AppState, W> for LoadingController {
    fn lifecycle(
        &mut self,
        child: &mut W,
        ctx: &mut LifeCycleCtx,
        event: &LifeCycle,
        data: &AppState,
        env: &Env,
    ) {
        if let LifeCycle::WidgetAdded = event {
            let sink = ctx.get_external_handle();
            thread::spawn(move || match create_files_if_not_exist() {
                Ok(_) => sink.submit_command(SET_SCREEN, Main, Target::Auto),
                Err(e) => sink.submit_command(
                    SHOW_ERROR,
                    format!("Failed to create files: {}", e),
                    Target::Auto,
                ),
            });
        }
        child.lifecycle(ctx, event, data, env);
    }
}
```


database/connection.rs for Mutex
```rust
static CONNECTION: Mutex<Option<Connection>> = Mutex::new(None);

pub struct ConnectionGuard(MutexGuard<'static, Option<Connection>>);

[......]

pub fn get_connection() -> Result<ConnectionGuard, String> {
    let mut conn_guard = CONNECTION
        .lock()
        .map_err(|_| "Failed to lock connection mutex".to_string())?;

    let game_number = super::GAME_NUMBER.load(Ordering::SeqCst);
    if game_number == 0 {
        return Err("Game number is not set".to_string());
    }

    if conn_guard.is_none() {
        let db_file = format!("Career_{}.db", game_number);
        let db_path = get_game_saves_path().join(db_file);
        let conn =
            Connection::open(db_path).map_err(|e| format!("Failed to open database: {}", e))?;

        *conn_guard = Some(conn);
    }

    Ok(ConnectionGuard(conn_guard))
}

pub fn delete_connection() {
    let mut conn_guard = CONNECTION.lock().unwrap();
    *conn_guard = None;
}

```